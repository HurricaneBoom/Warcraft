<!DOCTYPE HTML>

<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Savory &mdash; Free Website Template, Free HTML5 Template
	by GetTemplates.co</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description"
	content="Free HTML5 Website Template by GetTemplates.co" />
<meta name="keywords"
	content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
<meta name="author" content="GetTemplates.co" />

<!-- Facebook and Twitter integration -->
<meta property="og:title" content="" />
<meta property="og:image" content="" />
<meta property="og:url" content="" />
<meta property="og:site_name" content="" />
<meta property="og:description" content="" />
<meta name="twitter:title" content="" />
<meta name="twitter:image" content="" />
<meta name="twitter:url" content="" />
<meta name="twitter:card" content="" />

<!-- <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet"> -->

<!-- Animate.css -->
<link rel="stylesheet" href="css/animate.css">
<!-- Icomoon Icon Fonts-->
<link rel="stylesheet" href="css/icomoon.css">
<!-- Themify Icons-->
<link rel="stylesheet" href="css/themify-icons.css">
<!-- Bootstrap  -->
<link rel="stylesheet" href="css/bootstrap.css">

<!-- Magnific Popup -->
<link rel="stylesheet" href="css/magnific-popup.css">

<!-- Bootstrap DateTimePicker -->
<link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">

<!-- Owl Carousel  -->
<link rel="stylesheet" href="css/owl.carousel.min.css">
<link rel="stylesheet" href="css/owl.theme.default.min.css">

<!-- Theme style  -->
<link rel="stylesheet" href="css/style.css">

<!-- Modernizr JS -->
<script src="js/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>
	<![endif]-->

</head>
<body>

	<div class="gtco-loader"></div>

	<div id="page">


		<!-- <div class="page-inner"> -->
		<nav class="gtco-nav" role="navigation">
			<div class="gtco-container">
				<div class="row">
					<div class="col-sm-4 col-xs-12">
						<div id="gtco-logo">
							<a href="doIndexUI.do">Back<em>.</em></a>
						</div>
					</div>
					<div class="col-xs-8 text-right menu-1">
						<form class="form-inline">
							<div class="col-md-6 col-sm-6">
								<div class="form-group">
									<label for="name" class="sr-only">Name</label> <input
										type="text" class="form-control" id="diet_name"
										placeholder="菜品名称">
								</div>
							</div>
							<div class="col-md-6 col-sm-6">
								<button type="submit" class="btn btn-default btn-block">Query</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</nav>

		<!-- <header id="gtco-header" class="gtco-cover gtco-cover-md" role="banner">
		<div class="overlay"></div>
		<div class="gtco-container">
			<div class="row">
				<div class="col-md-12 col-md-offset-0 text-left">										
				</div>
			</div>
		</div>
	</header> -->



		<div class="gtco-section">
			<div class="gtco-container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 text-center gtco-heading">
						<h2 class="cursive-font primary-color">Popular Dishes</h2>
						<p>Dignissimos asperiores vitae velit veniam totam fuga
							molestias accusamus alias autem provident. Odit ab aliquam dolor
							eius.</p>
					</div>
				</div>
				<div class="row" id="menuId">
					<!-- <div class="col-lg-4 col-md-4 col-sm-6">
					<a href="images/img_1.jpg" class="fh5co-card-item image-popup" id="a">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_1.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Fresh Mushrooms</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$19.15</span></p>
						</div>
						<button type="button" class="btn-add" style="margin-left:150px;margin-bottom:30px" >buy</button>
					</a>
				</div>   
				<div class="col-lg-4 col-md-4 col-sm-6">
					<a href="images/img_2.jpg" class="fh5co-card-item image-popup">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_2.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Cheese and Garlic Toast</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$20.99</span></p>
						</div>
					</a>
				</div>
				<div class="col-lg-4 col-md-4 col-sm-6">
					<a  class="fh5co-card-item image-popup">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_3.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Grilled Chiken Salad</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$8.99</span></p>

						</div>
					</a>
				</div>


				<div class="col-lg-4 col-md-4 col-sm-6">
					<a class="fh5co-card-item image-popup">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_4.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Organic Egg</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$12.99</span></p>
						</div>
					</a>
				</div>

				<div class="col-lg-4 col-md-4 col-sm-6">
					<a href="images/img_5.jpg" class="fh5co-card-item image-popup">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_5.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Tomato Soup with Chicken</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$23.10</span></p>
						</div>
					</a>
				</div>

				<div class="col-lg-4 col-md-4 col-sm-6">
					<a href="images/img_6.jpg" class="fh5co-card-item image-popup">
						<figure>
							<div class="overlay"><i class="ti-plus"></i></div>
							<img src="images/img_6.jpg" alt="Image" class="img-responsive">
						</figure>
						<div class="fh5co-text">
							<h2>Salad with Crispy Chicken</h2>
							<p>Far far away, behind the word mountains, far from the countries Vokalia..</p>
							<p><span class="price cursive-font">$5.59</span></p>
						</div>
					</a>
				</div>
 -->
 				
				</div>
			</div>
		</div>

		<div id="gtco-features">
			<div class="gtco-container">
				<div class="row">
					<div
						class="col-md-8 col-md-offset-2 text-center gtco-heading animate-box">
						<h2 class="cursive-font">Our Services</h2>
						<p>Dignissimos asperiores vitae velit veniam totam fuga
							molestias accusamus alias autem provident. Odit ab aliquam dolor
							eius.</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-4 col-sm-6">
						<div class="feature-center animate-box"
							data-animate-effect="fadeIn">
							<span class="icon"> <i class="ti-face-smile"></i>
							</span>
							<h3>Happy People</h3>
							<p>Dignissimos asperiores vitae velit veniam totam fuga
								molestias accusamus alias autem provident. Odit ab aliquam dolor
								eius.</p>
						</div>
					</div>
					<div class="col-md-4 col-sm-6">
						<div class="feature-center animate-box"
							data-animate-effect="fadeIn">
							<span class="icon"> <i class="ti-thought"></i>
							</span>
							<h3>Creative Culinary</h3>
							<p>Dignissimos asperiores vitae velit veniam totam fuga
								molestias accusamus alias autem provident. Odit ab aliquam dolor
								eius.</p>
						</div>
					</div>
					<div class="col-md-4 col-sm-6">
						<div class="feature-center animate-box"
							data-animate-effect="fadeIn">
							<span class="icon"> <i class="ti-truck"></i>
							</span>
							<h3>Food Delivery</h3>
							<p>Dignissimos asperiores vitae velit veniam totam fuga
								molestias accusamus alias autem provident. Odit ab aliquam dolor
								eius.</p>
						</div>
					</div>

				</div>
			</div>
			<div id="gtco-down" style="display: none" style="padding-bottom:10px">
				<h1 style="margin-left: 650px";font-size:"color:white">shopping cart</h1>
				<table class="table table-hover">
					<thead>
						<tr>
							<th>菜品id</th>
							<th>菜品名称</th>
							<th>菜品金额</th>
							<th>菜品描述</th>
							<th>菜品图片</th>
							<th>菜品状态</th>
						</tr>
					</thead>
					<tbody id="tbodyId"></tbody>
				</table>
				<button class="btn-pay"
					style="margin-left: 1200px; margin-bottom: 10px;border-width:0px;border-radius:3px;background:#FF3333;cursor:pointer;outline:none;width:50px;heigth:50px;border-radius:25px;">Pay</button>
			</div>
		</div>
		<div class="copyrights">
			Collect from <a href="http://www.cssmoban.com/" title="网站模板">网站模板</a>
		</div>



		<!-- <div id="gtco-counter" class="gtco-section">
		<div class="gtco-container">

			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center gtco-heading animate-box">
					<h2 class="cursive-font primary-color">Fun Facts</h2>
					<p>Dignissimos asperiores vitae velit veniam totam fuga molestias accusamus alias autem provident. Odit ab aliquam dolor eius.</p>
				</div>
			</div>

			<div class="row">
				
				<div class="col-md-3 col-sm-6 animate-box" data-animate-effect="fadeInUp">
					<div class="feature-center">
						<span class="counter js-counter" data-from="0" data-to="5" data-speed="5000" data-refresh-interval="50">1</span>
						<span class="counter-label">Avg. Rating</span>

					</div>
				</div>
				<div class="col-md-3 col-sm-6 animate-box" data-animate-effect="fadeInUp">
					<div class="feature-center">
						<span class="counter js-counter" data-from="0" data-to="43" data-speed="5000" data-refresh-interval="50">1</span>
						<span class="counter-label">Food Types</span>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 animate-box" data-animate-effect="fadeInUp">
					<div class="feature-center">
						<span class="counter js-counter" data-from="0" data-to="32" data-speed="5000" data-refresh-interval="50">1</span>
						<span class="counter-label">Chef Cook</span>
					</div>
				</div>
				<div class="col-md-3 col-sm-6 animate-box" data-animate-effect="fadeInUp">
					<div class="feature-center">
						<span class="counter js-counter" data-from="0" data-to="1985" data-speed="5000" data-refresh-interval="50">1</span>
						<span class="counter-label">Year Started</span>

					</div>
				</div>
					
			</div>
		</div>
	</div> -->




		<footer id="gtco-footer" role="contentinfo"
			style="background-image: url(images/img_bg_1.jpg)"
			data-stellar-background-ratio="0.5">
			<div class="overlay"></div>
			<div class="gtco-container">
				<div class="row row-pb-md">




					<div class="col-md-12 text-center">
						<div class="gtco-widget">
							<h3>Get In Touch</h3>
							<ul class="gtco-quick-contact">
								<li><a href="#"><i class="icon-phone"></i> +1 234 567
										890</a></li>
								<li><a href="#"><i class="icon-mail2"></i>
										info@GetTemplates.co</a></li>
								<li><a href="#"><i class="icon-chat"></i> Live Chat</a></li>
							</ul>
						</div>
						<div class="gtco-widget">
							<h3>Get Social</h3>
							<ul class="gtco-social-icons">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
								<li><a href="#"><i class="icon-dribbble"></i></a></li>
							</ul>
						</div>
					</div>

					<!-- <div class="col-md-12 text-center copyright">
					<p><small class="block">&copy; 2016 Free HTML5. All Rights Reserved.</small> 
						<small class="block">More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></small></p>
				</div> -->

				</div>



			</div>
		</footer>
		<!-- </div> -->

	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>

	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Carousel -->
	<script src="js/owl.carousel.min.js"></script>
	<!-- countTo -->
	<script src="js/jquery.countTo.js"></script>

	<!-- Stellar Parallax -->
	<script src="js/jquery.stellar.min.js"></script>

	<!-- Magnific Popup -->
	<script src="js/jquery.magnific-popup.min.js"></script>
	<script src="js/magnific-popup-options.js"></script>

	<script src="js/moment.min.js"></script>
	<script src="js/bootstrap-datetimepicker.min.js"></script>
	<script src="js/stomp.js"></script>


	<!-- Main -->
	<script src="js/main.js"></script>
	<script type="text/javascript">
		var a = 1;
		$(document).ready(function() {
			doGetObjects();
			
			/* $("#divId").on("click",".btn-add",doInsertTrolley); */

			$(".ti-truck").click(function() {
				/* var display=$('div').css('display');
				console.log(display); */

				if (a == 0) {
					$("#gtco-down").css('display', 'none');
					a = 1;
				} else {
					a = 0;
					$("#gtco-down").css('display', 'block');
				}
				doGetTrolley();
			});
			$(".btn-pay").click(function() {
				doInsertIndent();
				$("#gtco-down").hide();
			});
			$("#tbodyId").on("click", ".btn-delete", doDeleteTrolley);
			$(".btn-block").click(function() {
				doQueryObjectsByName();
			})

			// .on("click",".btn-add",doLoadEditUI);
		});

		function doDeleteTrolley() {
			var dietId = $(this).parents("tr").data("dietId");
			console.log(dietId);
			var params = {
				"dietId" : dietId
			}
			var url = "trolley/deleteTrolley.do";
			var btn = $(this);//获取点击的button对象
			$.post(url, params, function(result) {
				alert(result.message);
				doGetTrolley();
			})
		}

		function doInsertIndent() {
			/* $(this).data("buyer_id",1);
			$(this).data("shopping_id",2);
			$(this).data("store_id",3);
			$(this).data("deliverer_id",4);
			$(this).data("trolley_id",5);
			$(this).data("indent_status","sdsa") */
			var buyerId = $(this).data("buyer_id");
			var shoppingId = $(this).data("shopping_id");
			var storeId = $(this).data("store_id");
			var delivererId = $(this).data("deliverer_id");
			var trolleyId = $(this).data("trolley_id");
			var indentStatus = $(this).data("indent_status");

			var params = {
				"buyerId" : buyerId,
				"shoppingId" : shoppingId,
				"storeId" : storeId,
				"delivererId" : delivererId,
				"trolleyId" : trolleyId,
				"indentStatus" : indentStatus
			};
			//url
			var url = "indent/insertIndent.do";
			//ajax request
			var btn = $(this);//获取点击的button对象
			$.post(url, params, function(result) {
				//doPageChange();跳转到订单页面
				alert(result.message);
			})
		}

		function doInsertTrolley() {
			//console.log("1111111");
			//params（获取绑定的当前行数据）
			/* $(this).data("diet_id",1); */
			$(this).data("trolley_num", 1);
			/* $(this).data("trolley_money",10); */
			var i=$(this).parent("div").attr("id");
			//console.log(i);
			var dietId = $(".image-popup").data(""+i);;
			//console.log(dietId);
			//console.log(dietId);
			var trolleyNum = $(this).data("trolley_num");
			var trolleyMoney = $(".image-popup").data("trolleyMoney");

			var params = {
				"dietId" : dietId,
				"trolleyNum" : trolleyNum,
				"trolleyMoney" : trolleyMoney
			};
			//url
			var url = "trolley/insertTrolley.do";
			//ajax request
			var btn = $(this);//获取点击的button对象
			$.post(url, params, function(result) {
				if (result.state == 1) {
					alert(result.message);
					doGetTrolley();
					//doGetObjects();//重新查询刷新	    		   
				} else {
					alert(result.message);
				}
			})
		}
		//页面加载完成异步加载当前页数据
		function doGetTrolley() {
			var url = "menu/selectTrolley.do";
			$.getJSON(url, function(result) {
				console.log(result);
				doHandleTrolleyResponseResult(result);
			});
		}
		function doHandleTrolleyResponseResult(result) {
			if (result.state == 1) {
				console.log(result.data);
				doSetTrolleyTableBodyRow(result.data);
			} else {
				alert(result.message);
			}
		}

		function doSetTrolleyTableBodyRow(data) {
			//1.获取tbody对象，并清空内容
			var tBody = $("#tbodyId");
			tBody.empty();
			//2.迭代数据,并追加到tBody
			var num = 0;
			for ( var i in data) {
				//2.1构建tr对象
				var tr = $("<tr></tr>");
				tr.data("dietId", data[i].dietId);
				//console.log(data[i].dietId);
				//2.2构建tds对象
				var tds = doCreateTrolleyTd(data[i]);
				//2.3将tds对象追加到tr中
				tr.append(tds);
				//2.4将tr追加到tbody中
				tBody.append(tr);
				num = num + data[i].dietPrice;
			}
			var td = "<span style='margin-left:30px;font-size:30px'>TotalPrice:"
					+ num + "</span>";
			tBody.append(td);
		}
		function doCreateTrolleyTd(row) {
			console.log(row);
			var tds = "<td>"
					+ row.dietId
					+ "</td>"
					+ "<td>"
					+ row.dietName
					+ "</td>"
					+ "<td>"
					+ row.dietPrice
					+ "</td>"
					+ "<td>"
					+ row.dietDescription
					+ "</td>"
					+"<td><img src='"+row.dietPicture+"' alt='Image' class='img-responsive' width='300' height='200' /></td>"
					+ "<td>"
					+ row.dietStatus
					+ "</td>"
					+ "<td><input type='button' class='btn-delete' value='Delete' style='border-width:0px;border-radius:3px;background:#66FF66;cursor:pointer;outline:none'></td>";

			return tds;
		}

		//模糊查询
		function doQueryObjectsByName() {
			//console.log("1111111");
			var url = "menu/doQueryObjectsByName.do";
			var dietName = $("#diet_name").val();
			var params = {
				"dietName" : dietName
			};
			$.getJSON(url, params, function(result) {
				//console.log(result.data);
				if (result.state == 1) {
					doSetTableBodyRows(result.data);
					//doSetPagination(result.data);
				} else {
					alert(result.message);
				}
			});
		}

		function doGetObjects() {
			var url = "menu/doFindObjects.do";
			//var params=null;
			$.get(url, function(result) {
				//alert(result.message);
				//console.log(result.data)
				doSetTableBodyRows(result.data);
			});
		}

		function doSetTableBodyRows(data) {
			//1.获取tbody对象，并清空内容
			//console.log(data)
			var tBody = $("#menuId");
			console.log(data);
			//2.迭代data内容将数据追加到tbody中
			//debugger
			for ( var i in data) {
				var div = doCreateTds(data[i],i);
				//console.log("111111111111");
				$(".image-popup").data(""+i, data[i].dietId);
				var add=$(".image-popup").data(""+i);
				$(".image-popup").data("trolleyMoney", data[i].dietPrice);
				//console.log($(this).data("dietId", data[i].dietId))
				tBody.append(div);
			}
			$(".image-popup").on("click",".btn-add",doInsertTrolley);
		}

		//创建页面添加到list页面中
		function doCreateTds(data,i) {
			//console.log(data);
			var div = "<div class='col-lg-4 col-md-4 col-sm-6'>"
					+ "<div id='"+i+"' class='fh5co-card-item image-popup'>"
					+ "<figure>"
					+ "<div class='overlay'>"
					+ "<i class='ti-plus'></i></div>"
					+ "<img src='"+data.dietPicture+"' alt='Image' class='img-responsive'></figure>"
					+ "<div class='fh5co-text'><h2>"
					+ data.dietName
					+ "</h2><p>$"
					+ data.dietPrice
					+ "</p><p><span class='price cursive-font'>"
					+ data.dietDescription
					+ "</span></p></div>"
					+ "<button type='button' class='btn-add' style='margin-left:140px;margin-bottom:30px;border-width:0px;border-radius:3px;background:#FFFF77;cursor:pointer;outline:none;font-size:25px;width:70px;height:50px;border-radius:40px' >buy</button>"
					+ "</div></div>";
			return div;
		}
	</script>
	
</body>
</html>


<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Order Information</title>
<meta
	content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'
	name='viewport'>
<meta name="description" content="Developed By M Abdur Rokib Promy">
<meta name="keywords"
	content="Admin, Bootstrap 3, Template, Theme, Responsive">
<!-- bootstrap 3.0.2 -->
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<!-- font Awesome -->
<link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<!-- Ionicons -->
<link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
<!-- Morris chart -->
<link href="css/morris/morris.css" rel="stylesheet" type="text/css" />
<!-- jvectormap -->
<link href="css/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet"
	type="text/css" />
<!-- Date Picker -->
<link href="css/datepicker/datepicker3.css" rel="stylesheet"
	type="text/css" />
<!-- fullCalendar -->
<!-- <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" /> -->
<!-- Daterange picker -->
<link href="css/daterangepicker/daterangepicker-bs3.css"
	rel="stylesheet" type="text/css" />
<!-- iCheck for checkboxes and radio inputs -->
<link href="css/iCheck/all.css" rel="stylesheet" type="text/css" />
<!-- bootstrap wysihtml5 - text editor -->
<!-- <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" /> -->
<link href='http://fonts.googleapis.com/css?family=Lato'
	rel='stylesheet' type='text/css'>
<!-- Theme style -->
<link href="css/style.css" rel="stylesheet" type="text/css" />
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
          <![endif]-->
<style type="text/css">
</style>
</head>



<body class="skin-black">
	<!-- header logo: style can be found in header.less -->
	<header class="header">
		<a href="index.html" class="logo">Order Information </a>
		<!-- Header Navbar: style can be found in header.less -->
		<nav class="navbar navbar-static-top" role="navigation">
			<!-- Sidebar toggle button-->
			<a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas"
				role="button"> <span class="sr-only">Toggle navigation</span> <span
				class="icon-bar"></span> <span class="icon-bar"></span> <span
				class="icon-bar"></span>
			</a>
			<div class="navbar-right">
				<ul class="nav navbar-nav">
					<!-- Messages: style can be found in dropdown.less-->
					<li class="dropdown messages-menu"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"> <i
							class="fa fa-envelope"></i> <span class="label label-success">4</span>
					</a>
						<ul class="dropdown-menu">
							<li class="header">You have 4 messages</li>
							<li>
								<!-- inner menu: contains the actual data -->
								<ul class="menu">
									<li>
										<!-- start message --> <a href="#">
											<div class="pull-left">
												<img src="img/26115.jpg" class="img-circle" alt="User Image" />
											</div>
											<h4>Support Team</h4>
											<p>Why not buy a new awesome theme?</p> <small
											class="pull-right"><i class="fa fa-clock-o"></i> 5
												mins</small>
									</a>
									</li>
									<!-- end message -->
									<li><a href="#">
											<div class="pull-left">
												<img src="img/26115.jpg" class="img-circle" alt="user image" />
											</div>
											<h4>Director Design Team</h4>
											<p>Why not buy a new awesome theme?</p> <small
											class="pull-right"><i class="fa fa-clock-o"></i> 2
												hours</small>
									</a></li>
									<li><a href="#">
											<div class="pull-left">
												<img src="img/avatar.png" class="img-circle"
													alt="user image" />
											</div>
											<h4>Developers</h4>
											<p>Why not buy a new awesome theme?</p> <small
											class="pull-right"><i class="fa fa-clock-o"></i>
												Today</small>
									</a></li>
									<li><a href="#">
											<div class="pull-left">
												<img src="img/26115.jpg" class="img-circle" alt="user image" />
											</div>
											<h4>Sales Department</h4>
											<p>Why not buy a new awesome theme?</p> <small
											class="pull-right"><i class="fa fa-clock-o"></i>
												Yesterday</small>
									</a></li>
									<li><a href="#">
											<div class="pull-left">
												<img src="img/avatar.png" class="img-circle"
													alt="user image" />
											</div>
											<h4>Reviewers</h4>
											<p>Why not buy a new awesome theme?</p> <small
											class="pull-right"><i class="fa fa-clock-o"></i> 2
												days</small>
									</a></li>
								</ul>
							</li>
							<li class="footer"><a href="#">See All Messages</a></li>
						</ul></li>
					<li class="dropdown tasks-menu"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"> <i
							class="fa fa-tasks"></i> <span class="label label-danger">9</span>
					</a>
						<ul class="dropdown-menu">
							<li class="header">You have 9 tasks</li>
							<li>
								<!-- inner menu: contains the actual data -->
								<ul class="menu">
									<li>
										<!-- Task item --> <a href="#">
											<h3>
												Design some buttons <small class="pull-right">20%</small>
											</h3>
											<div class="progress progress-striped xs">
												<div class="progress-bar progress-bar-success"
													style="width: 20%" role="progressbar" aria-valuenow="20"
													aria-valuemin="0" aria-valuemax="100">
													<span class="sr-only">20% Complete</span>
												</div>
											</div>
									</a>
									</li>
									<!-- end task item -->
									<li>
										<!-- Task item --> <a href="#">
											<h3>
												Create a nice theme <small class="pull-right">40%</small>
											</h3>
											<div class="progress progress-striped xs">
												<div class="progress-bar progress-bar-danger"
													style="width: 40%" role="progressbar" aria-valuenow="20"
													aria-valuemin="0" aria-valuemax="100">
													<span class="sr-only">40% Complete</span>
												</div>
											</div>
									</a>
									</li>
									<!-- end task item -->
									<li>
										<!-- Task item --> <a href="#">
											<h3>
												Some task I need to do <small class="pull-right">60%</small>
											</h3>
											<div class="progress progress-striped xs">
												<div class="progress-bar progress-bar-info"
													style="width: 60%" role="progressbar" aria-valuenow="20"
													aria-valuemin="0" aria-valuemax="100">
													<span class="sr-only">60% Complete</span>
												</div>
											</div>
									</a>
									</li>
									<!-- end task item -->
									<li>
										<!-- Task item --> <a href="#">
											<h3>
												Make beautiful transitions <small class="pull-right">80%</small>
											</h3>
											<div class="progress progress-striped xs">
												<div class="progress-bar progress-bar-warning"
													style="width: 80%" role="progressbar" aria-valuenow="20"
													aria-valuemin="0" aria-valuemax="100">
													<span class="sr-only">80% Complete</span>
												</div>
											</div>
									</a>
									</li>
									<!-- end task item -->
								</ul>
							</li>
							<li class="footer"><a href="#">View all tasks</a></li>
						</ul></li>
					<!-- User Account: style can be found in dropdown.less -->
					<li class="dropdown user user-menu"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"> <i
							class="fa fa-user"></i> <span>小明 <i class="caret"></i></span>
					</a>
						<ul class="dropdown-menu dropdown-custom dropdown-menu-right">
							<li class="dropdown-header text-center">Account</li>

							<li><a href="#"> <i
									class="fa fa-clock-o fa-fw pull-right"></i> <span
									class="badge badge-success pull-right">10</span> Updates
							</a> <a href="#"> <i class="fa fa-envelope-o fa-fw pull-right"></i>
									<span class="badge badge-danger pull-right">5</span> Messages
							</a> <a href="#"><i class="fa fa-magnet fa-fw pull-right"></i> <span
									class="badge badge-info pull-right">3</span> Subscriptions</a> <a
								href="#"><i class="fa fa-question fa-fw pull-right"></i> <span
									class="badge pull-right">11</span> FAQ</a></li>

							<li class="divider"></li>

							<li><a href="#"> <i class="fa fa-user fa-fw pull-right"></i>
									Profile
							</a> <a data-toggle="modal" href="#modal-user-settings"> <i
									class="fa fa-cog fa-fw pull-right"></i> Settings
							</a></li>

							<li class="divider"></li>

							<li><a href="#"><i class="fa fa-ban fa-fw pull-right"></i>
									Logout</a></li>
						</ul></li>
				</ul>
			</div>
		</nav>
	</header>
	
	<div class="wrapper row-offcanvas row-offcanvas-left">
		<!-- Left side column. contains the logo and sidebar -->
		<aside class="left-side sidebar-offcanvas">
			<!-- sidebar: style can be found in sidebar.less -->
			<section class="sidebar">
				<!-- Sidebar user panel -->
				<div class="user-panel">
					<div class="pull-left image">
						<img src="img/26115.jpg" class="img-circle" alt="User Image" />
					</div>
					<div class="pull-left info">
						<p>小明</p>

						<a href="#"><i class="fa fa-circle text-success"></i>上班</a>
					</div>
				</div>
				<!-- search form -->
				<form action="#" method="get" class="sidebar-form">
					<div class="input-group">
						<input type="text" name="q" class="form-control"
							placeholder="Search..." /> <span class="input-group-btn">
							<button type='submit' name='seach' id='search-btn'
								class="btn btn-flat">
								<i class="fa fa-search"></i>
							</button>
						</span>
					</div>
				</form>
				<!-- /.search form -->
				<!-- sidebar menu: : style can be found in sidebar.less -->
				<ul class="sidebar-menu">
					<li class="active"><a href="doIndexUI.do"> <i
							class="fa fa-dashboard"></i> <span>deliever Information</span>
					</a></li>
			   <li class="treeview">
          <a href="doOrderUI.do"><i class="fa fa-link"></i> <span>Order Information</span>
            <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
          </a>
          <ul class="treeview-menu">
            <li><a id="load-order-id">Completed Order</a></li>
            
          </ul>
        </li>
				</ul>
			</section>
			<!-- /.sidebar -->
		</aside>
		<div class="copyrights">			
		</div>
		<aside class="right-side">

			<section class="content-header">
				<h1>
					Order  Information
				</h1>
			</section>

	
	<section id="mainContentId" class="content container-fluid"><div class="row">
	<div class="col-xs-12">
		<div class="box">
		
			<!-- /.box-header -->
			<div class="box-body table-responsive no-padding">
				<form>
				  <table class="table table-hover">
					<thead>
						<tr>
							<th>订单id</th>	
							<th>配送员id</th>
							<th>接单时间</th>
							<th>接单日期</th>
							<th>操作</th>				
						</tr>
					</thead>
					<tbody id="tbodyId"></tbody>
				</form>
			</div>
			<!-- /.box-body -->
        </div><!-- ./wrapper -->


        <!-- jQuery 2.0.2 -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <script src="js/jquery.min.js" type="text/javascript"></script>

        <!-- Bootstrap -->
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <!-- Director App -->
        <script src="js/Director/app.js" type="text/javascript"></script>
        <script type="text/javascript">
        $(function(){
        	doGetObjects();
        	$("tbody").on("click",".btn-update",doUpdateObjects);
        	doLoadUI("load-order-id","doOrderUI2.do");

        });
        
        
        function doLoadUI(id,url){
      	  $("#"+id).click(function(){
           	   $("#mainContentId").load(url,function(){
           		  $("#mainContentId").removeData();
           	   });
            });
        }
     
        function doGetObjects(){
			// debugger
			 console.log("doGetObjects");
			 //1.定义请求的url
			 var logUrl="selectByPrimaryKey.do"
			 //var params="pageCurrent="+pageCurrent;
			 //点击查询按钮时,获取用户名,基于用户名执行查询操作.
			 //3.发送异步请求
			 $.ajax({//底层封装了XMLHttpRequest
				 url:logUrl,
				 dataType:"json",
				 success:function(result){
				   //debugger
				   doHandleResponseResult(result);
				 }
			 });//ajax()为jquery中定义异步请求函数
			 //如上ajax方法的简写方式
			/* $.getJSON(logUrl,params,function(result){
				 doHandleResponseResult(result);
			 }); */
		}
        
        
		function doHandleResponseResult(result){//jsonResult
			//debugger
			if(result.state==1){
			  //初始化当前页记录(将日志数据呈现在页面上)
			  doSetTableBodyRows(result.data);
			}else{
			  alert(result.message);
			}
		}
		
		
		function doSetTableBodyRows(records){
		   //1.获取tbody对象,并清空
		   var tBody=$("#tbodyId");
		   tBody.empty();//清空数据
		   for(var i in records){
			   	//2.1构建tr对象
			   	var tr=$("<tr></tr>")
			   	tr.data("indentId",records[i].indentId);
			   	//2.2构建tds对象
			   	var tds=doCreateTds(records[i]);
			   	//2.3将td追加到tr中
			   	tr.append(tds);
			   	//2.4将tr追加到tbody中
			   	tBody.append(tr);
		   
		}
		   
		function doCreateTds(row){
			 var tds=
				 "<td>"+row.indentId+"</td>"+
				 "<td>"+row.delivererId+"</td>"+	
				 "<td>"+row.delivererOrderStarttime+"</td>"+
				 "<td>"+row.elivererOrderDate+"</td>"+
				 "<td><button type='button' class='btn-update'>arrived</button></td>";
		    return tds;
		}
		
		}
		function doUpdateObjects(){
			var indentId=$(this).parent("td").parent("tr").data("indentId");
			console.log(indentId);
			var params={"indentId":indentId}
			var url="udpateIndentStatus.do"
			$.post(url,params,function(result){
				if(result.state==1){
					alert(result.message);
					doGetObjects();
				}else{
					alert(result.message);
				}
			})
		};
		
		
	</script>
    </body>
</html>
